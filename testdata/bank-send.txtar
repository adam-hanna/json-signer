# Setup gaia node
gaiad init gaia-test --home $WORK/gaiad --chain-id cosmos-dev
gaiad config chain-id cosmos-dev --home $WORK/gaiad
gaiad keys add val1 --home $WORK/gaiad --keyring-backend test
gaiad keys add test1 --home $WORK/gaiad --keyring-backend test
gaiad genesis add-genesis-account val1 1000000000stake --home $WORK/gaiad --keyring-backend test
gaiad genesis add-genesis-account test1 1000000000uatom --home $WORK/gaiad --keyring-backend test
gaiad genesis gentx val1 1000000000stake --home $WORK/gaiad --keyring-backend test 
gaiad genesis collect-gentxs --home $WORK/gaiad
exec /tmp/gaiad start --home $WORK/gaiad --minimum-gas-prices 100uatom &
exec sleep 5
# Check account
gaiad q auth account cosmos1vza9q0anvpe72x55mscxn6g83wgwn7s7flkxmd --home $WORK/gaiad
# Generate tx
gaiad tx bank send test1 cosmos1l0znsvddllw9knha3yx2svnlxny676d8ns7uys 100000uatom --home $WORK/gaiad --fees 1000uatom --generate-only --account-number 1 --sequence 1 --gas 100000 --keyring-backend test
cp stdout tx.json

# Sign tx
ttyin -stdin keyring-pwd
json-signer sign-tx -from=test1 -keyring-dir=$WORK/gaiad/keyring-test -keyring-backend file -account=1 -sequence=1 -chain-id=cosmos-dev tx.json
cp stdout tx-signed.json

# Validate signature
gaiad tx validate-signatures tx-signed.json --home $WORK/gaiad 

stop

-- keyring-pwd --
test
